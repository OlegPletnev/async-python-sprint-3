# Проект чата с использованием синтаксиса async/await.

## Описание

**Проект мессенджера реализованный с использованием синтаксиса **async/await**. 
Сервер и клиентская часть реализованы с использованием `StreamReader` и `StreamWriter`.  

После запуска сервера и подключения всех клиентов, они оказываются в общем чате,
в котором могут писать сообщения друг другу.

В проекте встроено логирование.

### Stack

Python 3.12, asyncio 3.4.3, aioconsole 0.6.2, aiofiles=23.2.1

## Установка, Как запустить проект:
https://github.com/OlegPletnev/async-python-sprint-3
Клонировать репозиторий и перейти в него в командной строке:

```
git clone git@github.com:OlegPletnev/async-python-sprint-3.git
```

Создать и активировать виртуальное окружение:

```shell
python3 -m venv env       
source env/scripts/activate # для Windows
source env/bin/activate     # для Linux
```

Установить зависимости из файла requirements.txt:

```
pip install -r requirements.txt
```

## Работа с мессенджером:

Запуск сервера производится через команду:
```
python server.py
```
В дальнейшем вся работа будет производиться через приложения клиента,
чтобы закончить выполнение сервера, введите команду ctrl+c.


Запуск нескольких клиентов производите в отдельных терминалах из директории проекта.
Вы можете заходить в чат с нескольких устройств под одним именем. 
Их состояния будут синхронизированы.
```
python client.py
```
Срок жизни сообщений из чата равен одному часу. Это значит, 
что ранее сохраненные сообщения в файле backup.csv проходят периодическую чистку.
Потребность в ней возникает в момент регистрации клиента в чате, поскольку
ему необходимо предоставить историю сообщений, которую он не видел с последней сессии 
(если она была), но не более 20 строк.

Запуск клиента содержит один обязательный аргумент (username), и 2 необязательных (host,port) "client.py [-h] [-H HOST] [-p PORT] username".
Если во время ввода сообщения возникла ошибка "Error during the enter" попробуйте ввести своё сообщение ещё раз.
Закончить выполнение клиента можно через команду ctrl+c, 
или просто закрыть терминальное окно, но предпочтительнее ввод команды:
```
/exit
```

### Отправка сообщений:

После регистрации, где клиент вводит логин и пароль, он подключается в общий чат, 
сообщения вводятся непосредственно в терминал и по клавише enter отправляются в чат.

Отправить приватное сообщения для конкретного пользователя:
```
/private имя_кому_отправляется текст_сообщения
```

### Служебные сообщения
`/rules` - просмотр справки.  
`/status` - посмотреть информацию о чате: общую и личную.  
`/private <имя> <текст>` - отправить приватное сообщение. Шаблон дублируется в справке.   
Если кто-то вам отправит такое сообщение, оно будет выделено "`>>`".
Самому себе отправлять не получится.  
`/ban <имя>` - отправить жалобу на пользователя. Шаблон также в справке.  
`/exit` - выйти из чата.

В чате установлено ограничение на количество сообщений за период времени. 
По умолчанию это _20 сообщений в час_. Когда достигает этого количества, 
то сервер проверяет время на них потраченное. Если оно меньше часа, то клиенту придется
ждать остаток до конца периода.  
Этот тип блокировки, а также бан, связанный с получением трех жалоб, Клиент не сможет обойти
через вход с другого устройства. Разве что под другим именем. 